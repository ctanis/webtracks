em(target, context = $basefont)
  (target / context) * 1em

embossed()
  $shadow_color = invert($gray)
  if arguments == "light"
    $shadow_color = $gray
  box-shadow 1px 1px 1px $shadow_color

hostile-takeover(type = absolute)
  position type
  top 0
  left 0
  right 0
  bottom 0

proportional-magic(height)
  position relative
  overflow hidden
  .dummy
    width 100%
    height 0
    margin-top height
  .dummy-content
    position absolute
    top 0
    left 0
    right 0
    bottom 0
    overflow hidden

track-animations()
  for i in 0..23
    &#track-{i}
      transition-delay i * 0.05s
    &#review-track-{i}
      transition-delay i * 0.05s

pan-styles(prefix)
  &{prefix}
    button(true)
    -webkit-appearance none
    -moz-appearance none
    padding 0
    width 21px
    height 36px
    background-color $gray
    border-radius $radius
    box-shadow 0 -1px 1px #fff, 0 1px 3px $gray

volume-styles(prefix)
  &{prefix}
    -webkit-appearance none
    -moz-appearance none
    transform-origin 50% 50%
    transform rotate(180deg)
    border-radius 30% / 5px
    background-color lighten($gray, 40%)
    border 1px solid lighten($gray, 40%)
    width 86px
    height 54px
    background-image url("/images/volume-slider-grip.png"), radial-gradient(50% 88%, #E6E6E6 50%, #F0F0F0 90%)
    background-position center
    background-repeat no-repeat
    box-shadow 0px 0px 0px 0px rgba(0,0,0,0.15), 4px 0 1px 0px #979797, 7px 0 7px rgba(0,0,0,0.2)
    &::before
      content " "
      position absolute
      top 5px
      bottom 5px
      left 8px
      width 3px
      background-color $red-light-dark
      border-radius 3px
      box-shadow 1px 0 0 #fff, 0 0 0 0 rgba(0,0,0,0)
      transition background-color $anim-snappy ease-out, box-shadow $anim-snappy ease-out
      &.clipped
        background-color red
        box-shadow 0 0 12px 0px red

meter-styles-bar(prefix)
  &{prefix}
    background none
    background-color darken($gray, 50%)
    box-shadow 0 0 6px #000 inset, 0 0 2px 1px #fff
    border-radius $radius
    outline none

meter-styles-optimum(prefix)
  &{prefix}
    width: 0
    box-shadow 0 0 4px $gray inset
    background-image linear-gradient(90deg, rgb(0,180,0) 0%, rgb(160,255,160) 85%, rgb(255,230,0) 90%, rgb(255,30,0) 100%)
    background-size 100% 4px
    // Applied when meter value is dropping
    transition width 0.25s cubic-bezier(0.55, 0.055, 0.675, 0.19)
    &.rising
      // Applied when meter value is rising
      transition width 0.1s cubic-bezier(0.215, 0.61, 0.355, 1)
    &.off
      // Applied when meter is off
      // (Slows down the drop, feels more natural)
      transition width 0.6s cubic-bezier(0.65, 0.055, 0.675, 0.19)

master-volume-styles(prefix)
  &{prefix}
    button()
    -webkit-appearance none
    -moz-appearance none
    padding 0
    width 21px
    height 36px
    background-color $gray
    border-radius $radius
    box-shadow 0 1px 3px $gray
    position relative
    background-color lighten($gray, 80%)
    background-image url("/images/master-volume-slider-grip.png")
    background-position center
    background-repeat no-repeat
